{% extends 'home.html' %}

{% block child_content %}
<h3>ユーザ年休検索画面</h3>
<br/>
<div class="text-center">
    <a href="{{url_for('home_admin')}}" class="btn btn-success">管理者ホームに戻る</a>　　　
</div>
<br><br><br>
<div class="container-fluid">
    <div class="d-flex m-3 d-flex justify-content-around">

        <div class="p-2 w-25 d-md-flex">
            <div class="form-group">
                <form action="{{ url_for('users_nenkyu') }}" method="POST">
                    <br><br>
                    <input type="text" name="lname" class="form-control" placeholder="姓">　
                    <input type="text" name="fname" class="form-control" placeholder="名"><br><br>

                    <p>事業所名</p>
                    <select class="form-control form-control-sm" name="team">
                        {% if team == "" %}
                        <option value="{{ val[0] }}" {{ specification[2] }}>{{ disp[0] }}</option>
                        {% else %}                       
                        <option value="{{ val[0] }}">{{ disp[0] }}</option>
                        {% endif %}
                        {% if team == "1" %}
                        <option value="{{ val[1] }}" {{ specification[2] }}>{{ disp[1] }}</option>
                        {% else %}                       
                        <option value="{{ val[1] }}">{{ disp[1] }}</option>
                        {% endif %}
                        {% if team == "2" %}
                        <option value="{{ val[2] }}" {{ specification[2] }}>{{ disp[2] }}</option>
                        {% else %}                       
                        <option value="{{ val[2] }}">{{ disp[2] }}</option>
                        {% endif %}
                        {% if team == "3" %}
                        <option value="{{ val[3] }}" {{ specification[2] }}>{{ disp[3] }}</option>
                        {% else %}                       
                        <option value="{{ val[3] }}">{{ disp[3] }}</option>
                        {% endif %}
                        {% if team == "4" %}
                        <option value="{{ val[4] }}" {{ specification[2] }}>{{ disp[4] }}</option>
                        {% else %}                       
                        <option value="{{ val[4] }}">{{ disp[4] }}</option>
                        {% endif %}
                        {% if team == "5" %}
                        <option value="{{ val[5] }}" {{ specification[2] }}>{{ disp[5] }}</option>
                        {% else %}                       
                        <option value="{{ val[5] }}">{{ disp[5] }}</option>
                        {% endif %}
                        {% if team == "6" %}
                        <option value="{{ val[6] }}" {{ specification[2] }}>{{ disp[6] }}</option>
                        {% else %}                       
                        <option value="{{ val[6] }}">{{ disp[6] }}</option>
                        {% endif %}
                        {% if team == "7" %}
                        <option value="{{ val[7] }}" {{ specification[2] }}>{{ disp[7] }}</option>
                        {% else %}                       
                        <option value="{{ val[7] }}">{{ disp[7] }}</option>
                        {% endif %}
                        {% if team == "8" %}
                        <option value="{{ val[8] }}" {{ specification[2] }}>{{ disp[8] }}</option>
                        {% else %}                       
                        <option value="{{ val[8] }}">{{ disp[8] }}</option>
                        {% endif %}
                    </select><br><br><br>

                    <p>検索条件</p>
                    <select class="form-control form-control-sm" name="terms">
                        {% if term == "" %}
                        <option value="{{ val[0] }}" {{ specification[2] }}>{{ serch[0] }}</option>
                        {% else %}
                        <option value="{{ val[0] }}">{{ serch[0] }}</option>
                        {% endif %}
                        
                        {% if term == "3" %}
                        <option value="{{ val[3] }}" {{ specification[2] }}>{{ serch[3] }}</option>
                        {% else %}
                        <option value="{{ val[3] }}">{{ serch[3] }}</option>
                        {% endif %}                        
                    </select><br><br><br>                    

                    <input type="submit" value="この条件で検索" name="sort" class="btn btn-secondary">
                </form>
            </div>
        </div>   
        
        <div class="p-2 w-50 d-md-flex">
            <div class="form-group">
                <form action="{{ url_for('users_kana') }}" method="POST">
                    <p>スタッフの五十音での検索</p>
                    <table class="table text-center">
                        <tbody>
                            <tr>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ワ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ラ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ヤ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="マ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ハ"></td>                                                                                      
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ナ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="タ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="サ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="カ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ア"></td>                                                                                      
                            </tr>
                            <tr>
                                <td></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="リ"></td>
                                <td></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ミ"></td>                                                                                      
                                <td><input type="submit" name="kana" class="btn btn-info" value="ヒ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ニ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="チ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="シ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="キ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="イ"></td>                                                                                      
                            </tr>
                            <tr>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ヲ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ル"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ユ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ム"></td>                                                                                      
                                <td><input type="submit" name="kana" class="btn btn-info" value="フ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ヌ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ツ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ス"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ク"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ウ"></td>                                                                                      
                            </tr>
                            <tr>
                                <td></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="レ"></td>
                                <td></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="メ"></td>                                                                                      
                                <td><input type="submit" name="kana" class="btn btn-info" value="ヘ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ネ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="テ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="セ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ケ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="エ"></td>                                                                                      
                            </tr>
                            <tr>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ン"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ロ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ヨ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="モ"></td>                                                                                      
                                <td><input type="submit" name="kana" class="btn btn-info" value="ホ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ノ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="ト"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="ソ"></td>
                                <td><input type="submit" name="kana" class="btn btn-info" value="コ"></td>
                                <td><input type="submit" name="kana" class="btn btn-secondary" value="オ"></td>                                                                                      
                            </tr>
                        </tbody>
                    </table>
                </form>
                <br><br><br><br><br>
                <div class="text-center">
                    <a href="{{ url_for('summary_fulltime') }}" type="button" class="btn btn-primary">常勤職員一覧（１日基準）</a>　　　　　
                    <a href="{{ url_for('summary_parttime') }}" type="button" class="btn btn-info">パート職員一覧（１日基準）</a>
                </div>
                <br>
                <div class="text-center">
                    <a href="{{ url_for('summary_fulltime26') }}" type="button" class="btn btn-primary">常勤職員一覧（２６日基準）</a>　　　　　
                    <a href="{{ url_for('summary_parttime26') }}" type="button" class="btn btn-info">パート職員一覧（２６日基準）</a>
                </div>
            </div>
        </div>
    
    </div>
</div>

<br><br><br><br>

<div id="adm-tbl" class="col-10 center-block">
    <div class="sort-table">
        <a href="javascript:void(0)" onclick="onCSVDownload(this, document.querySelector('#fv-table'), '{{ datatocsv }} 職員年休データ一覧画面（26日基準）download_({{ dwl_today.strftime('%Y-%m-%d') }}).csv');" type="button" class="btn btn-warning">CSVダウンロード</a>
        <br><br><br>
        <table id="fv-table" class="table table-striped table-hover">
            <caption class="disp_csv">{{ datatocsv }} 現在</caption>
            <thead>
                <tr class="st3 text-center">
                    <th>社員番号</th>
                    <th>氏名</th>
                    <th>常勤</th>
                    <th>年休使用日数</th>
                    <th>年休残日数</th>
                    <th>次回付与年月</th>
                    <th>前回付与年月</th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% if users and rp_hols %}
                {% for rph in rp_hols %}
                {% for u in users %}

                {% if u.OUTDAY is none %}
                {% if u.STAFFID == rph.STAFFID %}
                {% if rph.NEXT_DATEGRANT is not none %}

                <tr>
                    <td>{{ u.STAFFID }}</td>
                    <td>{{ u.LNAME }} {{ u.FNAME }}</td>
                    <td>
                        {% if rph.CONTRACT_CODE == 1 %}
                        ８ｈ常勤
                        {% elif rph.CONTRACT_CODE == 2%}
                        パート
                        {% elif rph.CONTRACT_CODE == 3%}
                        ６ｈ常勤
                        {% elif rph.CONTRACT_CODE == 4 %}
                        ７ｈ常勤
                        {% elif rph.CONTRACT_CODE == 5 %}
                        ３２ｈ常勤
                        {% endif %}
                    </td>
                    {% if rph.USED_PAIDHOLIDAY + rph.REMAIN_PAIDHOLIDAY >= 10.0 and rph.USED_PAIDHOLIDAY < 5.0 %}
                    <td style="{{ warn_for_holiday_style }}">{{ rph.USED_PAIDHOLIDAY }}</td>
                    {% else %}
                    <td>{{ rph.USED_PAIDHOLIDAY }}</td>
                    {% endif %}
                    <td>{{ rph.REMAIN_PAIDHOLIDAY }}</td>
                    <td>{{ rph.NEXT_DATEGRANT.strftime('%Y-%m-%d') }}</td>                
                    <td>{{ rph.LAST_DATEGRANT.strftime('%Y-%m-%d') }}</td>                
                    <td><a href="{{ url_for('nenkyu_detail', STAFFID=u.STAFFID) }}" class="btn btn-loyal" type="submit">年休取得種類</a></td>
                    <td><a href="{{ url_for('edit_data_user', STAFFID=u.STAFFID, intFlg=1) }}" class="btn btn-gr" type="submit">職員情報編集</a></td>
                    <td><a href="{{ url_for('users_detail', STAFFID=u.STAFFID) }}" class="btn btn-warning" type="submit">打刻編集</a></td>
                    <td><a href="{{ url_for('reset_token', STAFFID=u.STAFFID) }}" class="btn btn-danger" type="submit">PW編集</a></td>
                </tr>

                {% endif %}
                {% endif %}
                {% endif %}

                {% endfor %}
                {% endfor %}
                {% endif %}   
            </tbody>
        </table>
    </div>

    <div class="h1">
        <br><br><br><br><br>
        <br><br><br><br><br>
    </div>       

<div>
{% endblock %}
