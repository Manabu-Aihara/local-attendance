{% extends 'home.html' %}

{% block child_content %}

{# 通常申請者の申請リスト #}
{% if uinfo %}
  <h3>申請リスト</h3>
  <h4>社員番号：{{ uinfo.STAFFID }}　氏名：{{ uinfo.LNAME }} {{ uinfo.FNAME }}</h4>
  <div>
    <select class="date-search">
      <option>2023/6</option>
    </select>
    <input type="button" value="クリック" id="extract-date">
  </div>
  <a href="{{ url_for('get_notification_form') }}" class="btn to-notice-form">届出申請</a>
{% else %}
{# 承認者のみの申請リスト #}
  <h4 id="h4-status"></h4>
  <select id="status">
    {% for s in s_enum %}
      <option value="{{ s.value }}">{{ s.name }}</option>
    {% endfor %}
  </select>
  <input type="button" value="クリック" id="extract-status">
  <div><input type="button" value="戻る" id="btnBack"></div>
{% endif %}

<p>{{ stf_login.STAFFID }}</p>

{% if nlst is none %}
  <p>{{ stf_login.STAFFID }}</p>
{% else %}
  <div id="approval-site">
    <table id="fv-table" class="table table-striped table-hover table-notification">
      <thead>
        <tr class="st3 text-center">
          <th>申請日</th>
          {% if f is true %}
            <th>社員番号</th>
            <th>社員名</th>
          {% endif %}
          <th>申請種類</th>
          <th>申請状態</th>
          <th>開始日</th>
          <th>開始時間</th>
          <th>終了日</th>
          <th>終了時間</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for nl in nlst %}
          <tr data-status="{{ nl.STATUS }}" class="body-tr">
            <td>{{ nl.NOTICE_DAYTIME }}</td>
            {% if f is true %}
              <td>{{ nl.STAFFID }}</td>
              <td>{{ nl.LNAME }}{{ nl.FNAME }}</td>
            {% endif %}
            <td>{{ nl.NAME }}</td>
            <td>{{ nl.STATUS }}</td>
            <td>{{ nl.START_DAY }}</td>
            <td>{{ nl.START_TIME }}</td>
            <td>{{ nl.END_DAY }}</td>
            <td>{{ nl.END_TIME }}</td>
            <td>
              <a href="{{ url_for('get_individual_approval', id=nl.id, STAFFID=nl.STAFFID) }}">確認</a>
            </td>     
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}

<script>
  let btnBack = document.getElementById('btnBack');
  btnBack.addEventListener('click', function(){
    history.back();
  });
</script>
<script src="/static/js/StatusRequest.js"></script>
<script src="/static/js/DateSelectAdd.js"></script>
{% endblock %}
