{% extends 'home.html' %}

{% block child_content %}
{{ stf_login.STAFFID }}

<form method="post" action="/regist" class="approval">
  申請内容：<input type="text" name="content" value="{{ one_data[0] }}">
  対象日：<input type="date" name="start-day" value="{{ one_data[1] }}">〜
  対象終了日：<input type="date" name="end-day" value="{{ one_data[2] }}">
  開始時刻：<input type="time" name="start-time" value="{{ one_data[3] }}">〜
  終了時刻：<input type="time" name="end-time" value="{{ one_data[4] }}">
  備考：<input type="text" name="remark" value="{{ one_data[5] }}">
  {% if one_data[6] %}
    <p>{{ one_data[6] }}</p>
  {% else %}
    <input type="submit" value="申請依頼">
  {% endif %}
</form>

{% if f is true and one_data[7] %}
  <form method="post" action="{{ url_for('change_status_ok', id=one_data[7]) }}">
    <button type="submit">承認</button>
  </form>
  <form method="post" action="{{ url_for('change_status_ng', id=one_data[7]) }}">
    <button type="submit">拒否</button>
  </form>
{% else %}
  <p></p>
{% endif %}

<input type="button" value="戻る" id="btnBack">
<script>
  let btnBack = document.getElementById('btnBack');
  btnBack.addEventListener('click', function(){
      history.back();
  });
</script>
<script>
  /*
   取得urlによってフォームを入力不可にする
  */
  const r = /\d+$/;
  console.log(r.test(location.pathname));
  if(r.test(location.pathname)){
    const currentForm = document.getElementsByClassName('approval')[0];
    // console.log(currentForm);
    // const childElements = currentForm.children;
    // forEach, mapはダメだった
    for(let i = 0; i <= 5; i++){
      currentForm[i].disabled = true;
    };
  }
</script>
{% endblock %}